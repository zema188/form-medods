(function(){"use strict";var e={8113:function(e,t,a){var r=a(6848),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container",attrs:{id:"app"}},[t("the-form",{on:{success:function(t){return e.successSendForm()}}}),t("the-popup",{attrs:{isActive:e.popupIsActive},on:{"update:isActive":function(t){e.popupIsActive=t}}},[t("p",{staticClass:"text"},[e._v(" Новый клиент успешно создан! "),t("svg",{staticClass:"icon",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"#000000"}},[t("g",{attrs:{id:"SVGRepo_bgCarrier","stroke-width":"0"}}),t("g",{attrs:{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}}),t("g",{attrs:{id:"SVGRepo_iconCarrier"}},[t("path",{attrs:{d:"M511.64164 924.327835c-228.816869 0-414.989937-186.16283-414.989937-414.989937S282.825796 94.347961 511.64164 94.347961c102.396724 0 200.763434 37.621642 276.975315 105.931176 9.47913 8.499272 10.266498 23.077351 1.755963 32.556481-8.488009 9.501656-23.054826 10.266498-32.556481 1.778489-67.723871-60.721519-155.148319-94.156494-246.174797-94.156494-203.396868 0-368.880285 165.482394-368.880285 368.880285S308.243749 878.218184 511.64164 878.218184c199.164126 0 361.089542-155.779033 368.60998-354.639065 0.49556-12.720751 11.032364-22.863359 23.910794-22.177356 12.720751 0.484298 22.649367 11.190043 22.15483 23.910794-8.465484 223.74966-190.609564 399.015278-414.675604 399.015278z",fill:"#22C67F"}}),t("path",{attrs:{d:"M960.926616 327.538868l-65.210232-65.209209-350.956149 350.956149-244.56832-244.566273-65.210233 65.209209 309.745789 309.743741 0.032764-0.031741 0.03174 0.031741z",fill:"#74E8AE"}})])])])])],1)},i=[],s=function(){var e=this,t=e._self._c;return t("form",{staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.sendForm(t.target)},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendForm(t.target)}}},[t("div",{staticClass:"form__list"},e._l(e.attributes,(function(e,a){return t("form-field",{key:a,attrs:{data:e},on:{"update:value":function(t){e.value=t}}})})),1),t("h2",[e._v(" Адрес ")]),t("div",{staticClass:"form__list"},e._l(e.address,(function(e,a){return t("form-field",{key:a,attrs:{data:e},on:{"update:value":function(t){e.value=t}}})})),1),t("h2",[e._v(" Паспорт ")]),t("div",{staticClass:"form__list"},e._l(e.passport,(function(e,a){return t("form-field",{key:a,attrs:{data:e},on:{"update:value":function(t){e.value=t}}})})),1),t("button",{staticClass:"form__btn-send btn btn_green",attrs:{type:"submit"}},[e._v(" Отправить ")])])},o=[],u=function(){var e=this,t=e._self._c;return t("div",{staticClass:"field-w",class:e.data.customClass?[...e.data.customClass]:""},[t("div",{staticClass:"field__text"},[t("span",{staticClass:"field__subtitle"},[e._v(" "+e._s(e.data.name)),e.data.required?t("b",[e._v("*")]):e._e()]),e.data.error?t("span",{staticClass:"error"},[e.data.textError?t("span",{staticClass:"error"},[e._v(" "+e._s(e.data.textError)+" ")]):t("span",{staticClass:"error"},[e._v(" Поле обязательно для заполнения ")])]):e._e()]),"input"===e.data.field&&"radio"!==e.data.type&&"checkbox"!==e.data.type?t("div",{staticClass:"field"},[t("input",{ref:"input",attrs:{name:e.data.name,type:e.data.type},domProps:{value:e.data.value},on:{input:t=>e.handleInput(t.target.value)}})]):e._e(),e.data.customClass?.includes("gender")?t("div",{staticClass:"field"},e._l(e.data.options,(function(a,r){return t("label",{key:r},["checkbox"===e.data.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.data.value,expression:"data.value"}],attrs:{name:e.data.name,type:"checkbox"},domProps:{value:a,checked:Array.isArray(e.data.value)?e._i(e.data.value,a)>-1:e.data.value},on:{change:function(t){var r=e.data.value,n=t.target,i=!!n.checked;if(Array.isArray(r)){var s=a,o=e._i(r,s);n.checked?o<0&&e.$set(e.data,"value",r.concat([s])):o>-1&&e.$set(e.data,"value",r.slice(0,o).concat(r.slice(o+1)))}else e.$set(e.data,"value",i)}}}):"radio"===e.data.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.data.value,expression:"data.value"}],attrs:{name:e.data.name,type:"radio"},domProps:{value:a,checked:e._q(e.data.value,a)},on:{change:function(t){return e.$set(e.data,"value",a)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.data.value,expression:"data.value"}],attrs:{name:e.data.name,type:e.data.type},domProps:{value:a,value:e.data.value},on:{input:function(t){t.target.composing||e.$set(e.data,"value",t.target.value)}}}),e._v(" "+e._s(a)+" ")])})),0):e._e(),"select"===e.data.field?t("div",{staticClass:"field"},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.data.value,expression:"data.value"}],attrs:{multiple:e.data.multiple,name:e.data.name},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.data,"value",t.target.multiple?a:a[0])}}},e._l(e.data.options,(function(a,r){return t("option",{key:r,domProps:{value:a}},[e._v(" "+e._s(a)+" ")])})),0)]):e._e(),"checkbox"===e.data.type?t("div",{staticClass:"field"},["checkbox"===e.data.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.data.value,expression:"data.value"}],ref:"input",attrs:{name:e.data.name,type:"checkbox"},domProps:{checked:Array.isArray(e.data.value)?e._i(e.data.value,null)>-1:e.data.value},on:{change:function(t){var a=e.data.value,r=t.target,n=!!r.checked;if(Array.isArray(a)){var i=null,s=e._i(a,i);r.checked?s<0&&e.$set(e.data,"value",a.concat([i])):s>-1&&e.$set(e.data,"value",a.slice(0,s).concat(a.slice(s+1)))}else e.$set(e.data,"value",n)}}}):"radio"===e.data.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.data.value,expression:"data.value"}],ref:"input",attrs:{name:e.data.name,type:"radio"},domProps:{checked:e._q(e.data.value,null)},on:{change:function(t){return e.$set(e.data,"value",null)}}}):t("input",{directives:[{name:"model",rawName:"v-model",value:e.data.value,expression:"data.value"}],ref:"input",attrs:{name:e.data.name,type:e.data.type},domProps:{value:e.data.value},on:{input:function(t){t.target.composing||e.$set(e.data,"value",t.target.value)}}})]):e._e()])},l=[],d={name:"FormField",props:{data:{type:Object,required:!0}},data(){return{input:null}},methods:{handleInput:function(e){this.data.customClass?.includes("phone")?this.setMask():this.$emit("update:value",e)},setMask:function(){let e="7 ### ### ## ##",t=this.$refs.input;if(t.value.length>e.length)return t.value=t.value.slice(0,e.length),void this.$emit("update:value",t.value.slice(0,e.length));if(!t.value)return t.value=7,void this.$emit("update:value",7);let a=0,r=t.value.replace(/\D/g,"");const n=e.replace(/(?!\+)./g,(function(e){return/[#\d]/.test(e)&&a<r.length?r.charAt(a++):a>=r.length?"":e}));this.$emit("update:value",n)}},mounted(){this.data.customClass?.includes("phone")&&this.setMask()}},c=d,p=a(1656),v=(0,p.A)(c,u,l,!1,null,"e7d60ffe",null),f=v.exports,m={name:"TheForm",components:{FormField:f},data(){return{attributes:{lastName:{field:"input",type:"text",required:!0,value:"",name:"Фамилия",error:!1},firstName:{field:"input",type:"text",required:!0,value:"",name:"Имя",error:!1},surname:{field:"input",type:"text",value:"",name:"Отчество",error:!1},birthday:{field:"input",type:"date",required:!0,value:null,name:"Дата рождения",error:!1},phone:{field:"input",type:"text",required:!0,value:"",name:"Номер телефона",error:!1,textError:"",customClass:["phone"]},gender:{field:"input",type:"radio",value:"",options:["Мужской","Женский"],name:"Пол",customClass:["gender"],error:!1},clientGroup:{field:"select",multiple:"true",value:[""],options:["VIP","Проблемные","ОМС"],required:!0,name:"Группа клиентов",customClass:["select"],error:!1},doctor:{field:"select",value:"Врач не выбран",options:["Врач не выбран","Иванов","Захаров","Чернышева"],name:"Лечащий врач",customClass:["select"],error:!1},sms:{field:"input",type:"checkbox",value:"",name:"Не отправлять СМС",customClass:["sms"],error:!1}},address:{index:{field:"input",type:"number",value:"",name:"Индекс",error:!1},country:{field:"input",type:"text",value:"",name:"Страна",error:!1},region:{field:"input",type:"text",value:"",name:"Область",error:!1},city:{field:"input",type:"text",required:!0,value:"",name:"Город",error:!1},street:{field:"input",type:"text",value:"",name:"Улица",error:!1},house:{field:"input",type:"text",value:"",name:"Дом",error:!1}},passport:{typeDocemunt:{field:"select",value:"Паспорт",options:["Паспорт","Свидетельство о рождении","Вод. удостоверение"],name:"Тип документа",customClass:["select"],error:!1},passportSerial:{field:"input",type:"text",value:"",name:"Серия",error:!1},passportNumber:{field:"input",type:"text",value:"",name:"Номер",error:!1},issuedBy:{field:"input",type:"text",value:"",name:"Кем выдан",error:!1},dateOfIssue:{field:"input",type:"date",required:!0,value:"",name:"Дата выдачи",error:!1}}}},methods:{sendForm:async function(e){if(this.validateForm()>0)return;const t=new FormData(e);try{await fetch("api/post",{method:"POST",body:t});this.$emit("success")}catch(a){console.error(a)}},validateForm:function(){let e=0;for(const[t,a]of Object.entries(this.allFeilds))if(a.required&&(a.error=!a.value,a.error&&e++),a.phone){const t=a.value.toString().replace(/ /g,"").length;1===t?(a.error=!0,a.textError="",e++):t<11?(a.error=!0,a.textError="Телефон должен состоять из 11 цифр",e++):(a.error=!1,a.textError="",e++)}return e}},computed:{allFeilds:function(){return{...this.attributes,...this.address,...this.passport}}}},h=m,y=(0,p.A)(h,s,o,!1,null,"5cfacb2e",null),_=y.exports,C=function(){var e=this,t=e._self._c;return t("div",{staticClass:"popup modal",class:[{active:e.isActive}],on:{click:function(t){return t.stopPropagation(),t.target!==t.currentTarget?null:e.closePopup()}}},[t("div",{staticClass:"popup__body"},[t("div",{staticClass:"popup__content"},[t("div",{staticClass:"content"},[e._t("default")],2),t("div",{staticClass:"popup__close",on:{click:function(t){return e.closePopup()}}},[t("svg",{attrs:{width:"19",height:"19",viewBox:"0 0 19 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[t("path",{attrs:{d:"M11.2644 9.5L17.8691 2.89534C17.9882 2.78024 18.0833 2.64255 18.1487 2.49031C18.2141 2.33807 18.2485 2.17434 18.25 2.00865C18.2514 1.84297 18.2198 1.67866 18.1571 1.52531C18.0943 1.37196 18.0017 1.23263 17.8845 1.11547C17.7674 0.998314 17.628 0.905661 17.4747 0.84292C17.3213 0.780179 17.157 0.748607 16.9913 0.750047C16.8257 0.751487 16.6619 0.785909 16.5097 0.851306C16.3575 0.916702 16.2198 1.01176 16.1047 1.13094L9.5 7.7356L2.89534 1.13094C2.66 0.903643 2.3448 0.77787 2.01763 0.780714C1.69046 0.783557 1.3775 0.914788 1.14614 1.14614C0.914788 1.3775 0.783557 1.69046 0.780714 2.01763C0.77787 2.3448 0.903643 2.66 1.13094 2.89534L7.7356 9.5L1.13094 16.1047C1.01176 16.2198 0.916702 16.3575 0.851306 16.5097C0.785909 16.6619 0.751487 16.8257 0.750047 16.9913C0.748607 17.157 0.780179 17.3213 0.84292 17.4747C0.905661 17.628 0.998314 17.7674 1.11547 17.8845C1.23263 18.0017 1.37196 18.0943 1.52531 18.1571C1.67866 18.2198 1.84297 18.2514 2.00865 18.25C2.17434 18.2485 2.33807 18.2141 2.49031 18.1487C2.64255 18.0833 2.78024 17.9882 2.89534 17.8691L9.5 11.2644L16.1047 17.8691C16.34 18.0964 16.6552 18.2221 16.9824 18.2193C17.3095 18.2164 17.6225 18.0852 17.8539 17.8539C18.0852 17.6225 18.2164 17.3095 18.2193 16.9824C18.2221 16.6552 18.0964 16.34 17.8691 16.1047L11.2644 9.5Z",fill:"#1F2A37"}})])])])])])},g=[],x={name:"ThePopup",props:{isActive:{type:Boolean,required:!0}},methods:{closePopup:function(){this.$emit("update:isActive",!1)}}},b=x,k=(0,p.A)(b,C,g,!1,null,"60f62202",null),w=k.exports,A={name:"App",components:{TheForm:_,ThePopup:w},data(){return{popupIsActive:!1}},methods:{successSendForm:function(){this.popupIsActive=!0}}},F=A,$=(0,p.A)(F,n,i,!1,null,null,null),P=$.exports;r.Ay.config.productionTip=!1,new r.Ay({render:e=>e(P)}).$mount("#app")}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,i){if(!r){var s=1/0;for(d=0;d<e.length;d++){r=e[d][0],n=e[d][1],i=e[d][2];for(var o=!0,u=0;u<r.length;u++)(!1&i||s>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[u])}))?r.splice(u--,1):(o=!1,i<s&&(s=i));if(o){e.splice(d--,1);var l=n();void 0!==l&&(t=l)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,n,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,i,s=r[0],o=r[1],u=r[2],l=0;if(s.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(u)var d=u(a)}for(t&&t(r);l<s.length;l++)i=s[l],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},r=self["webpackChunktestovoe_form_validation"]=self["webpackChunktestovoe_form_validation"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(8113)}));r=a.O(r)})();
//# sourceMappingURL=app.d97e1dfd.js.map